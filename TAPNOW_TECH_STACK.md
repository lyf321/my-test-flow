# TapNow å¤åˆ»å®Œæ•´æŠ€æœ¯é€‰å‹æ–¹æ¡ˆ

## ğŸ“‹ ç›®å½•

1. [æŠ€æœ¯é€‰å‹æ€»è§ˆ](#æŠ€æœ¯é€‰å‹æ€»è§ˆ)
2. [å‰ç«¯æŠ€æœ¯æ ˆ](#å‰ç«¯æŠ€æœ¯æ ˆ)
3. [åç«¯æŠ€æœ¯æ ˆ](#åç«¯æŠ€æœ¯æ ˆ)
4. [æ•°æ®åº“é€‰å‹](#æ•°æ®åº“é€‰å‹)
5. [AI æ¨¡å‹é›†æˆ](#ai-æ¨¡å‹é›†æˆ)
6. [æ–‡ä»¶å­˜å‚¨æ–¹æ¡ˆ](#æ–‡ä»¶å­˜å‚¨æ–¹æ¡ˆ)
7. [å®æ—¶åä½œæ–¹æ¡ˆ](#å®æ—¶åä½œæ–¹æ¡ˆ)
8. [éƒ¨ç½²æ¶æ„](#éƒ¨ç½²æ¶æ„)
9. [å¼€å‘è·¯çº¿å›¾](#å¼€å‘è·¯çº¿å›¾)
10. [æˆæœ¬ä¼°ç®—](#æˆæœ¬ä¼°ç®—)

---

## æŠ€æœ¯é€‰å‹æ€»è§ˆ

### ğŸ† æ¨èæŠ€æœ¯æ ˆï¼ˆå…¨æ ˆæ–¹æ¡ˆï¼‰

```
å‰ç«¯ï¼šVue 3 + TypeScript + Vue Flow
åç«¯ï¼šNode.js + TypeScript + Express/Fastify
æ•°æ®åº“ï¼šPostgreSQL + Redis
æ–‡ä»¶å­˜å‚¨ï¼šMinIO / AWS S3
AI é›†æˆï¼šPython å¾®æœåŠ¡ + FastAPI
å®æ—¶åä½œï¼šWebSocket (Socket.io)
ä»»åŠ¡é˜Ÿåˆ—ï¼šBullMQ / Celery
```

### æ ¸å¿ƒæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯å±‚ (Vue 3)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å·¥ä½œæµç¼–è¾‘å™¨  â”‚  â”‚  æ¨¡æ¿ç®¡ç†    â”‚  â”‚  ç¤¾åŒºæµè§ˆ    â”‚  â”‚
â”‚  â”‚  (Vue Flow)  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†• HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API ç½‘å…³å±‚ (Nginx)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åç«¯æœåŠ¡å±‚ (Node.js)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å·¥ä½œæµæœåŠ¡   â”‚  â”‚  ç”¨æˆ·æœåŠ¡     â”‚  â”‚  ç¤¾åŒºæœåŠ¡     â”‚  â”‚
â”‚  â”‚  (Express)  â”‚  â”‚  (Express)   â”‚  â”‚  (Express)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AI æœåŠ¡å±‚ (Python)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å›¾åƒç”ŸæˆæœåŠ¡ â”‚  â”‚  è§†é¢‘ç”ŸæˆæœåŠ¡ â”‚  â”‚  åˆ†é•œè§£ææœåŠ¡ â”‚  â”‚
â”‚  â”‚  (FastAPI)   â”‚  â”‚  (FastAPI)   â”‚  â”‚  (FastAPI)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®å­˜å‚¨å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚    Redis     â”‚  â”‚   MinIO/S3   â”‚  â”‚
â”‚  â”‚  (ä¸»æ•°æ®åº“)   â”‚  â”‚  (ç¼“å­˜/é˜Ÿåˆ—) â”‚  â”‚  (æ–‡ä»¶å­˜å‚¨)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å‰ç«¯æŠ€æœ¯æ ˆ

### ğŸ† æ ¸å¿ƒæ¨èï¼šVue 3 + TypeScript

**ç†ç”±ï¼š**
- âœ… æ‚¨å½“å‰é¡¹ç›®å·²ä½¿ç”¨ Vue 3
- âœ… Vue Flow å®Œç¾æ”¯æŒèŠ‚ç‚¹å¼å·¥ä½œæµ
- âœ… TypeScript æä¾›ç±»å‹å®‰å…¨
- âœ… ç”Ÿæ€æˆç†Ÿï¼Œå¼€å‘æ•ˆç‡é«˜

### æŠ€æœ¯é€‰å‹è¯¦æƒ…

#### 1. æ ¸å¿ƒæ¡†æ¶

```json
{
  "vue": "^3.5.0",
  "@vue-flow/core": "^1.48.0",
  "@vue-flow/background": "^1.3.2",
  "@vue-flow/controls": "^1.1.3",
  "@vue-flow/minimap": "^1.5.4",
  "typescript": "^5.9.0"
}
```

**ä¸ºä»€ä¹ˆé€‰æ‹© Vue Flow è€Œä¸æ˜¯ AntV X6ï¼Ÿ**
- âœ… å¼€å‘æ•ˆç‡é«˜ 40-50%ï¼ˆè§ [æˆæœ¬åˆ†æ](./NODE_CONFIG_COST_ANALYSIS.md)ï¼‰
- âœ… åŸç”Ÿ Vue å“åº”å¼ï¼Œä»£ç ç®€æ´
- âœ… ç»´æŠ¤æˆæœ¬ä½
- âœ… å®Œå…¨ç¬¦åˆ Vue å¼€å‘ä¹ æƒ¯

#### 2. UI ç»„ä»¶åº“

**æ¨èæ–¹æ¡ˆ Aï¼šElement Plus**ï¼ˆæ¨èï¼‰
```bash
npm install element-plus @element-plus/icons-vue
```

**ä¼˜åŠ¿ï¼š**
- âœ… ç»„ä»¶ä¸°å¯Œï¼Œè¦†ç›–æ‰€æœ‰éœ€æ±‚
- âœ… æ–‡æ¡£å®Œå–„ï¼Œä¸­æ–‡æ”¯æŒå¥½
- âœ… ä¸ Vue 3 å®Œç¾é›†æˆ
- âœ… ç¤¾åŒºæ´»è·ƒ

**æ¨èæ–¹æ¡ˆ Bï¼šAnt Design Vue**
```bash
npm install ant-design-vue
```

**ä¼˜åŠ¿ï¼š**
- âœ… ä¼ä¸šçº§ç»„ä»¶åº“
- âœ… è®¾è®¡è§„èŒƒç»Ÿä¸€
- âœ… åŠŸèƒ½å¼ºå¤§

**æ¨èæ–¹æ¡ˆ Cï¼šNaive UI**
```bash
npm install naive-ui
```

**ä¼˜åŠ¿ï¼š**
- âœ… è½»é‡çº§
- âœ… TypeScript æ”¯æŒå¥½
- âœ… æ€§èƒ½ä¼˜ç§€

#### 3. çŠ¶æ€ç®¡ç†

**æ¨èï¼šPinia**ï¼ˆå·²ä½¿ç”¨ï¼‰
```bash
npm install pinia
```

**ç†ç”±ï¼š**
- âœ… Vue 3 å®˜æ–¹æ¨è
- âœ… TypeScript æ”¯æŒå®Œå–„
- âœ… æ¯” Vuex æ›´ç®€æ´
- âœ… æ‚¨å·²åœ¨ä½¿ç”¨

#### 4. è·¯ç”±ç®¡ç†

**æ¨èï¼šVue Router**
```bash
npm install vue-router@4
```

#### 5. HTTP å®¢æˆ·ç«¯

**æ¨èï¼šAxios**
```bash
npm install axios
```

#### 6. è¡¨å•éªŒè¯

**æ¨èï¼šVeeValidate**
```bash
npm install vee-validate yup
```

#### 7. å®æ—¶é€šä¿¡

**æ¨èï¼šSocket.io Client**
```bash
npm install socket.io-client
```

#### 8. å·¥å…·åº“

```bash
npm install lodash-es dayjs nanoid
```

### å‰ç«¯é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ workflow/
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkflowEditor.vue      # ä¸»ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ NodeConfigPanel.vue     # èŠ‚ç‚¹é…ç½®é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ TemplateManager.vue     # æ¨¡æ¿ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ VersionManager.vue      # ç‰ˆæœ¬ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ community/
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkflowGallery.vue     # ä½œå“ç”»å»Š
â”‚   â”‚   â”‚   â””â”€â”€ WorkflowDetail.vue     # ä½œå“è¯¦æƒ…
â”‚   â”‚   â””â”€â”€ common/
â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â”œâ”€â”€ useWorkflowTemplate.ts      # æ¨¡æ¿ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useWorkflowVersion.ts       # ç‰ˆæœ¬ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useWorkflowExecutor.ts      # å·¥ä½œæµæ‰§è¡Œ
â”‚   â”‚   â””â”€â”€ useRealtimeSync.ts          # å®æ—¶åŒæ­¥
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ workflow.ts                 # å·¥ä½œæµçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ user.ts                     # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â””â”€â”€ community.ts               # ç¤¾åŒºçŠ¶æ€
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api.ts                      # API å°è£…
â”‚   â”‚   â”œâ”€â”€ websocket.ts                # WebSocket
â”‚   â”‚   â””â”€â”€ storage.ts                  # æ–‡ä»¶ä¸Šä¼ 
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ workflow.ts                 # å·¥ä½œæµç±»å‹
â”‚   â”‚   â””â”€â”€ node.ts                     # èŠ‚ç‚¹ç±»å‹
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

---

## åç«¯æŠ€æœ¯æ ˆ

### ğŸ† æ ¸å¿ƒæ¨èï¼šNode.js + TypeScript + Express

**ç†ç”±ï¼š**
- âœ… ä¸å‰ç«¯æŠ€æœ¯æ ˆç»Ÿä¸€ï¼ˆTypeScriptï¼‰
- âœ… å¼€å‘æ•ˆç‡é«˜
- âœ… ç”Ÿæ€ä¸°å¯Œ
- âœ… é€‚åˆå®æ—¶åº”ç”¨ï¼ˆWebSocketï¼‰

### æŠ€æœ¯é€‰å‹è¯¦æƒ…

#### 1. æ ¸å¿ƒæ¡†æ¶

**æ–¹æ¡ˆ Aï¼šExpress**ï¼ˆæ¨èï¼‰
```bash
npm install express
npm install -D @types/express
```

**ä¼˜åŠ¿ï¼š**
- âœ… æˆç†Ÿç¨³å®š
- âœ… ç”Ÿæ€ä¸°å¯Œ
- âœ… å­¦ä¹ æˆæœ¬ä½
- âœ… ä¸­é—´ä»¶ä¸°å¯Œ

**æ–¹æ¡ˆ Bï¼šFastify**
```bash
npm install fastify
```

**ä¼˜åŠ¿ï¼š**
- âœ… æ€§èƒ½æ›´å¥½ï¼ˆ2-3å€ï¼‰
- âœ… ç±»å‹æ”¯æŒå¥½
- âœ… ç°ä»£åŒ–è®¾è®¡

**æ–¹æ¡ˆ Cï¼šNestJS**
```bash
npm install @nestjs/core @nestjs/common
```

**ä¼˜åŠ¿ï¼š**
- âœ… ä¼ä¸šçº§æ¡†æ¶
- âœ… ä¾èµ–æ³¨å…¥
- âœ… æ¨¡å—åŒ–è®¾è®¡
- âœ… é€‚åˆå¤§å‹é¡¹ç›®

#### 2. æ•°æ®åº“ ORM

**æ¨èï¼šPrisma**ï¼ˆæ¨èï¼‰
```bash
npm install prisma @prisma/client
```

**ä¼˜åŠ¿ï¼š**
- âœ… TypeScript æ”¯æŒå®Œç¾
- âœ… ç±»å‹å®‰å…¨
- âœ… è¿ç§»ç®¡ç†æ–¹ä¾¿
- âœ… å¼€å‘ä½“éªŒå¥½

**å¤‡é€‰ï¼šTypeORM**
```bash
npm install typeorm
```

#### 3. ä»»åŠ¡é˜Ÿåˆ—

**æ¨èï¼šBullMQ**
```bash
npm install bullmq ioredis
```

**ç”¨é€”ï¼š**
- å·¥ä½œæµå¼‚æ­¥æ‰§è¡Œ
- AI æ¨¡å‹è°ƒç”¨é˜Ÿåˆ—
- æ–‡ä»¶å¤„ç†ä»»åŠ¡

**å¤‡é€‰ï¼šAgenda**
```bash
npm install agenda
```

#### 4. WebSocket

**æ¨èï¼šSocket.io**
```bash
npm install socket.io
```

**ç”¨é€”ï¼š**
- å®æ—¶åä½œç¼–è¾‘
- å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€æ¨é€
- é€šçŸ¥æ¨é€

#### 5. æ–‡ä»¶ä¸Šä¼ 

**æ¨èï¼šMulter**
```bash
npm install multer
npm install -D @types/multer
```

#### 6. è®¤è¯æˆæƒ

**æ¨èï¼šJWT**
```bash
npm install jsonwebtoken
npm install bcryptjs
```

#### 7. API æ–‡æ¡£

**æ¨èï¼šSwagger**
```bash
npm install swagger-jsdoc swagger-ui-express
```

### åç«¯é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ workflow.controller.ts      # å·¥ä½œæµæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ template.controller.ts     # æ¨¡æ¿æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ user.controller.ts          # ç”¨æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ community.controller.ts    # ç¤¾åŒºæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ workflow.service.ts         # å·¥ä½œæµæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ execution.service.ts        # æ‰§è¡ŒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ template.service.ts         # æ¨¡æ¿æœåŠ¡
â”‚   â”‚   â””â”€â”€ ai.service.ts              # AI æœåŠ¡ä»£ç†
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ workflow.model.ts           # å·¥ä½œæµæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ template.model.ts          # æ¨¡æ¿æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.model.ts              # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts         # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ error.middleware.ts        # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ workflow.routes.ts         # å·¥ä½œæµè·¯ç”±
â”‚   â”‚   â””â”€â”€ user.routes.ts             # ç”¨æˆ·è·¯ç”±
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ logger.ts                  # æ—¥å¿—å·¥å…·
â”‚   â”‚   â””â”€â”€ validator.ts              # éªŒè¯å·¥å…·
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ database.ts                # æ•°æ®åº“é…ç½®
â”‚       â””â”€â”€ redis.ts                   # Redis é…ç½®
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma                  # æ•°æ®åº“æ¨¡å‹
â””â”€â”€ package.json
```

---

## æ•°æ®åº“é€‰å‹

### ğŸ† ä¸»æ•°æ®åº“ï¼šPostgreSQL

**ç†ç”±ï¼š**
- âœ… åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢
- âœ… JSON æ”¯æŒå¥½ï¼ˆå­˜å‚¨å·¥ä½œæµé…ç½®ï¼‰
- âœ… äº‹åŠ¡æ”¯æŒå®Œå–„
- âœ… æ‰©å±•æ€§å¼º
- âœ… å¼€æºå…è´¹

### ç¼“å­˜æ•°æ®åº“ï¼šRedis

**ç”¨é€”ï¼š**
- ä¼šè¯å­˜å‚¨
- ä»»åŠ¡é˜Ÿåˆ—
- å®æ—¶æ•°æ®ç¼“å­˜
- é™æµæ§åˆ¶

### æ•°æ®åº“è®¾è®¡

#### æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  username VARCHAR(100) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  avatar_url TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- å·¥ä½œæµè¡¨
CREATE TABLE workflows (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  nodes JSONB NOT NULL,
  edges JSONB NOT NULL,
  global_variables JSONB,
  visibility VARCHAR(20) DEFAULT 'private',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- æ¨¡æ¿è¡¨
CREATE TABLE templates (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  category VARCHAR(50),
  thumbnail_url TEXT,
  nodes JSONB NOT NULL,
  edges JSONB NOT NULL,
  parameters JSONB,
  usage_count INTEGER DEFAULT 0,
  rating DECIMAL(3,2),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ç‰ˆæœ¬è¡¨
CREATE TABLE workflow_versions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  workflow_id UUID REFERENCES workflows(id),
  version VARCHAR(50) NOT NULL,
  snapshot JSONB NOT NULL,
  description TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- æ‰§è¡Œè®°å½•è¡¨
CREATE TABLE executions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  workflow_id UUID REFERENCES workflows(id),
  user_id UUID REFERENCES users(id),
  status VARCHAR(20) NOT NULL,
  result JSONB,
  error_message TEXT,
  started_at TIMESTAMP,
  completed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ç¤¾åŒºä½œå“è¡¨
CREATE TABLE shared_workflows (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  workflow_id UUID REFERENCES workflows(id),
  user_id UUID REFERENCES users(id),
  title VARCHAR(255) NOT NULL,
  description TEXT,
  tags TEXT[],
  thumbnail_url TEXT,
  view_count INTEGER DEFAULT 0,
  like_count INTEGER DEFAULT 0,
  fork_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

---

## AI æ¨¡å‹é›†æˆ

### ğŸ† æ¨èæ–¹æ¡ˆï¼šPython å¾®æœåŠ¡ + FastAPI

**ç†ç”±ï¼š**
- âœ… Python æ˜¯ AI æ¨¡å‹çš„æ ‡å‡†è¯­è¨€
- âœ… ä¸°å¯Œçš„ AI åº“ç”Ÿæ€
- âœ… FastAPI æ€§èƒ½å¥½ï¼Œç±»å‹æ”¯æŒå¥½
- âœ… æ˜“äºé›†æˆå„ç§ AI æ¨¡å‹

### æŠ€æœ¯é€‰å‹

#### 1. Web æ¡†æ¶

**æ¨èï¼šFastAPI**
```bash
pip install fastapi uvicorn
```

**ä¼˜åŠ¿ï¼š**
- âœ… æ€§èƒ½ä¼˜ç§€ï¼ˆåŸºäº Starletteï¼‰
- âœ… è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
- âœ… ç±»å‹æ”¯æŒå¥½
- âœ… å¼‚æ­¥æ”¯æŒ

#### 2. AI æ¨¡å‹åº“

```bash
# å›¾åƒç”Ÿæˆ
pip install diffusers transformers torch

# è§†é¢‘å¤„ç†
pip install opencv-python moviepy

# å›¾åƒå¤„ç†
pip install pillow numpy

# åˆ†é•œè§£æ
pip install opencv-python-python
```

#### 3. æ¨¡å‹ç®¡ç†

**æ¨èï¼šHugging Face**
```bash
pip install huggingface-hub
```

### AI æœåŠ¡æ¶æ„

```
ai-services/
â”œâ”€â”€ image_generation/
â”‚   â”œâ”€â”€ main.py                    # FastAPI æœåŠ¡
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ stable_diffusion.py   # SD æ¨¡å‹
â”‚   â”‚   â””â”€â”€ midjourney.py         # MJ æ¨¡å‹
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ video_generation/
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ video_gen.py
â”œâ”€â”€ shot_analysis/
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ shot_parser.py
â””â”€â”€ docker-compose.yml
```

### ä¸åç«¯é›†æˆ

**é€šè¿‡ HTTP API è°ƒç”¨ï¼š**
```typescript
// backend/src/services/ai.service.ts
export class AIService {
  async generateImage(prompt: string, config: ImageConfig) {
    const response = await axios.post('http://ai-service:8000/generate', {
      prompt,
      config
    })
    return response.data
  }
}
```

---

## æ–‡ä»¶å­˜å‚¨æ–¹æ¡ˆ

### ğŸ† æ¨èæ–¹æ¡ˆ Aï¼šMinIOï¼ˆè‡ªæ‰˜ç®¡ï¼‰

**ä¼˜åŠ¿ï¼š**
- âœ… S3 å…¼å®¹ API
- âœ… å¼€æºå…è´¹
- âœ… å¯è‡ªæ‰˜ç®¡
- âœ… æ€§èƒ½å¥½

**éƒ¨ç½²ï¼š**
```yaml
# docker-compose.yml
services:
  minio:
    image: minio/minio
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      MINIO_ROOT_USER: admin
      MINIO_ROOT_PASSWORD: password
    volumes:
      - minio_data:/data
```

### æ¨èæ–¹æ¡ˆ Bï¼šAWS S3ï¼ˆäº‘æœåŠ¡ï¼‰

**ä¼˜åŠ¿ï¼š**
- âœ… ç¨³å®šå¯é 
- âœ… å…¨çƒ CDN
- âœ… è‡ªåŠ¨å¤‡ä»½
- âœ… ä¼ä¸šçº§æ”¯æŒ

### æ–‡ä»¶ä¸Šä¼ å®ç°

```typescript
// backend/src/services/storage.service.ts
import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3'

export class StorageService {
  async uploadFile(file: Buffer, key: string) {
    const client = new S3Client({
      endpoint: process.env.S3_ENDPOINT,
      credentials: {
        accessKeyId: process.env.S3_ACCESS_KEY,
        secretAccessKey: process.env.S3_SECRET_KEY
      }
    })
    
    await client.send(new PutObjectCommand({
      Bucket: process.env.S3_BUCKET,
      Key: key,
      Body: file
    }))
    
    return `${process.env.S3_ENDPOINT}/${process.env.S3_BUCKET}/${key}`
  }
}
```

---

## å®æ—¶åä½œæ–¹æ¡ˆ

### ğŸ† æ¨èï¼šSocket.io

**å®ç°å®æ—¶åä½œç¼–è¾‘ï¼š**

```typescript
// backend/src/services/realtime.service.ts
import { Server } from 'socket.io'

export class RealtimeService {
  private io: Server
  
  setup(server: any) {
    this.io = new Server(server, {
      cors: { origin: '*' }
    })
    
    this.io.on('connection', (socket) => {
      socket.on('join-workflow', (workflowId) => {
        socket.join(`workflow:${workflowId}`)
      })
      
      socket.on('node-update', (data) => {
        socket.to(`workflow:${data.workflowId}`).emit('node-updated', data)
      })
    })
  }
}
```

```typescript
// frontend/src/composables/useRealtimeSync.ts
import { io } from 'socket.io-client'

export function useRealtimeSync(workflowId: string) {
  const socket = io('http://localhost:3000')
  
  socket.emit('join-workflow', workflowId)
  
  socket.on('node-updated', (data) => {
    // æ›´æ–°èŠ‚ç‚¹
    updateNode(data.nodeId, data.node)
  })
  
  const syncNodeUpdate = (nodeId: string, node: Node) => {
    socket.emit('node-update', {
      workflowId,
      nodeId,
      node
    })
  }
  
  return { syncNodeUpdate }
}
```

---

## éƒ¨ç½²æ¶æ„

### ğŸ† æ¨èï¼šDocker + Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  # å‰ç«¯
  frontend:
    build: ./frontend
    ports:
      - "80:80"
    depends_on:
      - backend
  
  # åç«¯
  backend:
    build: ./backend
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://user:pass@postgres:5432/tapnow
      - REDIS_URL=redis://redis:6379
    depends_on:
      - postgres
      - redis
  
  # æ•°æ®åº“
  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=tapnow
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  # Redis
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
  
  # MinIO
  minio:
    image: minio/minio
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio_data:/data
  
  # AI æœåŠ¡
  ai-service:
    build: ./ai-services
    ports:
      - "8000:8000"
    volumes:
      - ./models:/app/models

volumes:
  postgres_data:
  redis_data:
  minio_data:
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

**æ¨èï¼šKubernetes**

```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tapnow-backend
spec:
  replicas: 3
  template:
    spec:
      containers:
      - name: backend
        image: tapnow/backend:latest
        ports:
        - containerPort: 3000
```

---

## å¼€å‘è·¯çº¿å›¾

### é˜¶æ®µä¸€ï¼šMVPï¼ˆ2-3 ä¸ªæœˆï¼‰

**ç›®æ ‡ï¼š** æ ¸å¿ƒå·¥ä½œæµç¼–è¾‘å’Œæ‰§è¡ŒåŠŸèƒ½

1. **å‰ç«¯ï¼ˆ4-6 å‘¨ï¼‰**
   - âœ… å·¥ä½œæµç¼–è¾‘å™¨ï¼ˆVue Flowï¼‰
   - âœ… èŠ‚ç‚¹é…ç½®é¢æ¿
   - âœ… åŸºç¡€èŠ‚ç‚¹ç±»å‹ï¼ˆ5-10 ç§ï¼‰
   - âœ… å·¥ä½œæµä¿å­˜/åŠ è½½

2. **åç«¯ï¼ˆ4-6 å‘¨ï¼‰**
   - âœ… ç”¨æˆ·ç³»ç»Ÿï¼ˆæ³¨å†Œ/ç™»å½•ï¼‰
   - âœ… å·¥ä½œæµ CRUD API
   - âœ… å·¥ä½œæµæ‰§è¡Œå¼•æ“
   - âœ… åŸºç¡€ AI é›†æˆï¼ˆ1-2 ä¸ªæ¨¡å‹ï¼‰

3. **æ•°æ®åº“ï¼ˆ1 å‘¨ï¼‰**
   - âœ… æ•°æ®åº“è®¾è®¡
   - âœ… Prisma æ¨¡å‹å®šä¹‰
   - âœ… è¿ç§»è„šæœ¬

### é˜¶æ®µäºŒï¼šå¢å¼ºåŠŸèƒ½ï¼ˆ2-3 ä¸ªæœˆï¼‰

1. **æ¨¡æ¿ç³»ç»Ÿ**ï¼ˆ3-4 å‘¨ï¼‰
   - æ¨¡æ¿åˆ›å»º/ç¼–è¾‘
   - æ¨¡æ¿å¸‚åœº
   - å‚æ•°åŒ–é…ç½®

2. **ç‰ˆæœ¬ç®¡ç†**ï¼ˆ2-3 å‘¨ï¼‰
   - ç‰ˆæœ¬ä¿å­˜
   - ç‰ˆæœ¬å¯¹æ¯”
   - ç‰ˆæœ¬å›æ»š

3. **ç¤¾åŒºåŠŸèƒ½**ï¼ˆ3-4 å‘¨ï¼‰
   - ä½œå“å‘å¸ƒ
   - ä½œå“æµè§ˆ
   - ç‚¹èµ/æ”¶è—

### é˜¶æ®µä¸‰ï¼šé«˜çº§åŠŸèƒ½ï¼ˆ2-3 ä¸ªæœˆï¼‰

1. **å®æ—¶åä½œ**ï¼ˆ3-4 å‘¨ï¼‰
   - WebSocket é›†æˆ
   - å¤šäººç¼–è¾‘
   - å†²çªè§£å†³

2. **AI æ¨¡å‹æ‰©å±•**ï¼ˆ4-6 å‘¨ï¼‰
   - æ›´å¤šæ¨¡å‹é›†æˆ
   - æ¨¡å‹ç®¡ç†
   - æ€§èƒ½ä¼˜åŒ–

3. **é«˜çº§åŠŸèƒ½**ï¼ˆ4-6 å‘¨ï¼‰
   - åˆ†é•œè§£æ
   - æ‰¹é‡å¤„ç†
   - å·¥ä½œæµè°ƒåº¦

---

## æˆæœ¬ä¼°ç®—

### å¼€å‘æˆæœ¬

| é˜¶æ®µ | æ—¶é—´ | äººåŠ› | æˆæœ¬ï¼ˆå‡è®¾ 2 äººï¼‰ |
|------|------|------|------------------|
| MVP | 2-3 æœˆ | 2 äºº | 20-30 ä¸‡ |
| å¢å¼ºåŠŸèƒ½ | 2-3 æœˆ | 2 äºº | 20-30 ä¸‡ |
| é«˜çº§åŠŸèƒ½ | 2-3 æœˆ | 2 äºº | 20-30 ä¸‡ |
| **æ€»è®¡** | **6-9 æœˆ** | **2 äºº** | **60-90 ä¸‡** |

### åŸºç¡€è®¾æ–½æˆæœ¬ï¼ˆæœˆï¼‰

| æœåŠ¡ | è§„æ ¼ | æœˆæˆæœ¬ |
|------|------|--------|
| æœåŠ¡å™¨ï¼ˆè‡ªæ‰˜ç®¡ï¼‰ | 4æ ¸8G Ã— 3 | 500-1000 å…ƒ |
| äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ï¼‰ | 4æ ¸8G Ã— 3 | 1500-2000 å…ƒ |
| æ•°æ®åº“ï¼ˆRDSï¼‰ | 2æ ¸4G | 500-800 å…ƒ |
| å¯¹è±¡å­˜å‚¨ï¼ˆOSSï¼‰ | 100GB | 100-200 å…ƒ |
| CDN | 100GB æµé‡ | 200-300 å…ƒ |
| **æ€»è®¡ï¼ˆè‡ªæ‰˜ç®¡ï¼‰** | | **800-1300 å…ƒ/æœˆ** |
| **æ€»è®¡ï¼ˆäº‘æœåŠ¡ï¼‰** | | **2300-3300 å…ƒ/æœˆ** |

### AI æ¨¡å‹æˆæœ¬

| æ¨¡å‹ | è°ƒç”¨æ–¹å¼ | æˆæœ¬ |
|------|---------|------|
| Stable Diffusion | è‡ªéƒ¨ç½² | æœåŠ¡å™¨æˆæœ¬ |
| Midjourney API | API è°ƒç”¨ | $0.04-0.08/å›¾ |
| OpenAI DALL-E | API è°ƒç”¨ | $0.02-0.04/å›¾ |

---

## æŠ€æœ¯é€‰å‹æ€»ç»“

### ğŸ† æœ€ç»ˆæ¨èæŠ€æœ¯æ ˆ

```
å‰ç«¯ï¼š
  - Vue 3 + TypeScript + Vue Flow
  - Element Plus / Ant Design Vue
  - Pinia + Vue Router
  - Socket.io Client

åç«¯ï¼š
  - Node.js + TypeScript + Express
  - Prisma + PostgreSQL
  - Redis + BullMQ
  - Socket.io

AI æœåŠ¡ï¼š
  - Python + FastAPI
  - Hugging Face / Diffusers
  - è‡ªéƒ¨ç½²æ¨¡å‹

å­˜å‚¨ï¼š
  - MinIOï¼ˆè‡ªæ‰˜ç®¡ï¼‰æˆ– AWS S3
  - PostgreSQLï¼ˆä¸»æ•°æ®åº“ï¼‰
  - Redisï¼ˆç¼“å­˜/é˜Ÿåˆ—ï¼‰

éƒ¨ç½²ï¼š
  - Docker + Docker Compose
  - Kubernetesï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
```

### ä¸ºä»€ä¹ˆè¿™ä¸ªæŠ€æœ¯æ ˆï¼Ÿ

1. **æŠ€æœ¯ç»Ÿä¸€**ï¼šå‰åç«¯éƒ½ç”¨ TypeScriptï¼Œé™ä½å­¦ä¹ æˆæœ¬
2. **å¼€å‘æ•ˆç‡**ï¼šVue Flow å¼€å‘æ•ˆç‡é«˜ 40-50%
3. **ç”Ÿæ€æˆç†Ÿ**ï¼šæ‰€æœ‰æŠ€æœ¯éƒ½æœ‰æˆç†Ÿç”Ÿæ€
4. **å¯æ‰©å±•æ€§**ï¼šå¾®æœåŠ¡æ¶æ„ï¼Œæ˜“äºæ‰©å±•
5. **æˆæœ¬å¯æ§**ï¼šå¤§éƒ¨åˆ†å¼€æºï¼Œæˆæœ¬å¯æ§

---

## å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–é¡¹ç›®

```bash
# å‰ç«¯
cd frontend
npm create vite@latest . -- --template vue-ts
npm install @vue-flow/core @vue-flow/background @vue-flow/controls
npm install element-plus pinia vue-router axios

# åç«¯
cd backend
npm init -y
npm install express prisma @prisma/client
npm install socket.io bullmq ioredis
npm install -D typescript @types/node @types/express

# AI æœåŠ¡
cd ai-services
python -m venv venv
source venv/bin/activate
pip install fastapi uvicorn diffusers
```

### 2. æ•°æ®åº“åˆå§‹åŒ–

```bash
cd backend
npx prisma init
npx prisma migrate dev
```

### 3. å¯åŠ¨å¼€å‘

```bash
# å‰ç«¯
cd frontend
npm run dev

# åç«¯
cd backend
npm run dev

# AI æœåŠ¡
cd ai-services
uvicorn main:app --reload
```

---

*æœ€åæ›´æ–°ï¼š2024å¹´*

