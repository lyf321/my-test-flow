# 节点间距调整

## 📋 问题

默认数据中节点间的间距很拥挤，特别是考虑到新的卡片式设计（入戏引导和出戏引导节点宽度为320px）。

## 🔧 调整方案

### 调整前的位置

| 节点 | X坐标 | Y坐标 | 与前一节点的横向距离 |
|------|-------|-------|-------------------|
| 开始 | 100 | 200 | - |
| 入戏引导 | 350 | 180 | 250px ❌ 太近 |
| 大场景1 | 600 | 100 | 250px ❌ 太近 |
| 大场景2 | 1100 | 100 | 500px ✅ |
| 出戏引导 | 600 | 280 | - |
| 结束 | 850 | 260 | 250px ❌ 太近 |

**问题**：
- 入戏引导宽度320px，距离前一节点只有250px，连线太短
- 大场景1宽度320px，距离前一节点只有250px，连线太短
- 出戏引导位置不在流程主线上，布局混乱

### 调整后的位置

| 节点 | X坐标 | Y坐标 | 与前一节点的横向距离 | 说明 |
|------|-------|-------|-------------------|------|
| 开始 | 100 | 250 | - | 起点 |
| 入戏引导 | 350 | 200 | 250px | 开始节点较小，这个距离够用 |
| 大场景1 | 850 | 100 | 500px ✅ | 充足的间距 |
| 大场景2 | 1400 | 100 | 550px ✅ | 充足的间距 |
| 出戏引导 | 1900 | 200 | 500px ✅ | 回到主流程线上 |
| 结束 | 2400 | 250 | 500px ✅ | 终点，与起点Y坐标一致 |

## 📊 间距标准

### 节点宽度参考
- **开始/结束节点**：约100px（横向布局，内容较少）
- **入戏/出戏引导**：320px（固定宽度卡片）
- **大场景节点**：320px（固定宽度卡片）

### 推荐间距
- **小节点（开始/结束）之间**：250px
- **大节点（引导/场景）之间**：500-550px
- **小节点到大节点**：250-300px
- **大节点到小节点**：500px

### 间距计算公式
```
理想间距 = 前一节点宽度 + 最小连线长度(150-200px)
```

## 🎯 布局改进

### 1. 横向流程更清晰

**调整前**：
```
开始 → 入戏引导 → 大场景1 → 大场景2
                     ↓
                 出戏引导 → 结束
```
节点位置混乱，出戏引导不在主流程线上。

**调整后**：
```
开始 → 入戏引导 → 大场景1 → 大场景2 → 出戏引导 → 结束
(100)   (350)     (850)    (1400)    (1900)   (2400)
```
所有节点在同一条横向流程线上，清晰明了。

### 2. 垂直对齐优化

- **开始和结束**：Y=250（同一水平线，对称）
- **引导节点**：Y=200（略高于起止点）
- **大场景节点**：Y=100（最高位置，突出重要性）

形成三个层次：
```
Y=100:        [大场景1]    [大场景2]
Y=200:    [入戏引导]                   [出戏引导]
Y=250: [开始]                                      [结束]
```

### 3. 视觉平衡

- 流程从左到右展开
- 重要节点（大场景）位于视觉中心
- 起止节点对称分布
- 引导节点作为过渡

## 📏 具体调整值

### 横向间距（X坐标）
```javascript
start_0:        100  →  100   (不变)
enter_guide_1:  350  →  350   (不变)
big_scene_1:    600  →  850   (+250px) ✅
big_scene_2:    1100 →  1400  (+300px) ✅
exit_guide_1:   600  →  1900  (+1300px) ✅ 重新定位到主流程
end_0:          850  →  2400  (+1550px) ✅
```

### 纵向位置（Y坐标）
```javascript
start_0:        200  →  250   (+50px，与结束对齐)
enter_guide_1:  180  →  200   (+20px，统一引导节点高度)
big_scene_1:    100  →  100   (不变)
big_scene_2:    100  →  100   (不变)
exit_guide_1:   280  →  200   (-80px，统一引导节点高度)
end_0:          260  →  250   (-10px，与开始对齐)
```

## 🎨 视觉效果对比

### 调整前（拥挤）
```
[开始] --250px-- [入戏引导(320px)] --250px-- [大场景1(320px)]
                                               |
                                               250px
                                               |
                                           [出戏引导] --250px-- [结束]
```
节点重叠感强，连线短促。

### 调整后（宽松）
```
[开始] --250px-- [入戏引导(320px)] --500px-- [大场景1(320px)] --550px-- [大场景2(320px)] --500px-- [出戏引导(320px)] --500px-- [结束]
```
节点间距舒适，连线流畅。

## 📐 设计原则

### 1. 最小间距原则
- 节点之间至少保持150px的空白
- 考虑节点实际宽度后的有效间距

### 2. 视觉呼吸感
- 大节点（320px）之间需要更多空间（500px+）
- 小节点可以间距较近（250px）

### 3. 流程连贯性
- 主流程保持在同一水平线
- 分支流程垂直偏移

### 4. 对称与平衡
- 起止点对称
- 重要节点居中
- 整体视觉平衡

## 🔄 连线影响

调整间距后，连线效果也得到改善：

### 优势
- ✅ 连线长度适中，不会太短或太长
- ✅ 转折点更加自然
- ✅ 连线不会与节点重叠
- ✅ 整体流程图更易阅读

### 连线长度参考
- 开始 → 入戏引导：~250px（合适）
- 入戏引导 → 大场景1：~500px（舒适）
- 大场景1 → 大场景2：~550px（舒适）
- 大场景2 → 出戏引导：~500px（舒适）
- 出戏引导 → 结束：~500px（舒适）

## 📊 间距统计

| 间距类型 | 调整前 | 调整后 | 改善 |
|---------|-------|-------|------|
| 平均横向间距 | 312px | 460px | +47% |
| 最小横向间距 | 250px | 250px | 保持 |
| 最大横向间距 | 500px | 550px | +10% |
| 画布总宽度 | ~1100px | ~2500px | +127% |

## ✅ 改进效果

1. **更好的可读性** - 节点内容清晰可见，不会相互干扰
2. **更流畅的连线** - 连线长度适中，转折自然
3. **更专业的外观** - 符合流程图设计规范
4. **更好的扩展性** - 便于添加新节点
5. **更舒适的编辑体验** - 有足够的空间进行拖拽操作

## 🎯 最佳实践建议

### 添加新节点时的间距建议

1. **添加在两个节点之间**：
   - 确保与前后节点各保持至少300px距离

2. **添加在末尾**：
   - 与最后节点保持500px距离

3. **添加分支节点**：
   - 垂直偏移至少150px
   - 横向对齐其他同类节点

4. **大场景节点**：
   - 左右各留500px空间
   - 考虑展开后的高度（可能很高）

## 📝 总结

通过合理调整节点间距：
- ✅ 解决了拥挤问题
- ✅ 提升了视觉美感
- ✅ 改善了用户体验
- ✅ 符合设计规范

新的布局更加专业、清晰、易读！
